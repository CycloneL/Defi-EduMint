# EduMint代理交易设置指南

## 概述

EduMint平台支持代理交易功能，使用户可以使用OCID登录，无需支付gas费用即可与区块链进行交互。本指南将帮助您设置和配置代理交易功能。

## 工作原理

1. 用户使用OCID登录平台
2. 当用户执行需要区块链交互的操作时（如购买课程、发送代币等）
3. 交易通过代理签名者执行，由平台支付gas费
4. 交易结果归属于用户的账户，用户无需支付gas费

## 配置步骤

### 1. 创建代理账户

首先，您需要创建一个用于执行代理交易的以太坊账户：

1. 生成一个新的以太坊私钥（您可以使用MetaMask或其他工具生成）
2. 保存这个私钥，不要与任何人分享
3. 记录对应的公共地址，这将是您的代理账户地址

### 2. 获取资金

您需要确保代理账户拥有足够的EDU TestNet代币来支付gas费：

1. 访问EDU TestNet水龙头获取测试ETH
2. 将一些测试ETH转入代理账户

### 3. 配置环境变量

在项目根目录中，您需要设置以下环境变量：

1. 复制`.env.example`文件为`.env.local`
2. 设置以下变量：
   ```
   # 代理签名者私钥 - 注意安全性!
   NEXT_PUBLIC_PROXY_PRIVATE_KEY=您的代理账户私钥（不含0x前缀）
   ```

### 4. 验证配置

启动应用程序后，导航栏应显示代理交易状态。确认以下内容：

1. 代理状态显示"已启用"
2. 代理账户显示正确的地址
3. 当用户使用OCID登录时，状态应显示"代理模式：活跃"

## 测试

确保配置正确后，您可以执行以下测试：

1. 使用OCID连接钱包
2. 尝试购买EDU代币或创建课程
3. 验证交易是否成功完成，而无需用户签名或支付gas费

## 常见问题排查

### 代理签名者未初始化

- 检查环境变量是否正确设置
- 确保代理账户拥有足够的测试ETH
- 检查浏览器控制台是否有错误消息

### 交易失败

- 确认代理账户有足够的gas费
- 检查合约权限是否正确设置
- 验证用户是否已通过OCID登录

### 权限问题

- 确保合约允许代理账户代表用户执行交易
- 检查是否需要特定角色或权限

## 安全考虑

代理私钥具有执行交易的能力，因此应妥善保管：

1. 不要在代码库中提交包含私钥的文件
2. 在生产环境中，考虑使用更安全的密钥管理解决方案
3. 限制代理账户的资金，仅保留足够支付gas费的金额
4. 定期监控代理账户的活动

## 高级配置

对于生产环境，您可能需要考虑以下额外安全措施：

1. 实施交易速率限制，防止滥用
2. 添加交易监控和警报系统
3. 实施智能合约审计以确保安全性
4. 使用多重签名钱包作为代理，提高安全性 